name: Python test

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["pypy3.9", "3.9"]
      steps:
        - user: action/checkout@v4
        - name: Set up Python ${{ matrix.python-version }}
          uses: actions/setup-python@v4
          with:
            python-version: ${{ matrix.python-version }}
        - name: Display Python Version
          run: python -c "import sys; print(sys.version)"
        - name: Install project
          run: |
            python -m pip install --upgrade pip
            pip install -e .
            pip install -U pytest
        - name: Test
          run: pytest -m "not on_demand"

